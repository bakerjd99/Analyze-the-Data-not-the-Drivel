%\input{bmamblenew.tex}

\subsection*{\href{https://analyzethedatanotthedrivel.org/2023/06/28/j-graphvizs-euclids-elements/}{J \texttt{graphviz}’s Euclid’s \emph{Elements}}}
\addcontentsline{toc}{subsection}{J \texttt{graphviz}’s Euclid’s \emph{Elements}}


\noindent\emph{Posted: 28 June 2023 16:12:10}
\vspace{6pt}

In Sarah Hart's new book
\href{https://www.theguardian.com/books/2023/apr/25/once-upon-a-prime-sarah-hart-review-why-maths-and-literature-make-a-winning-formula}{\emph{Once
Upon a Prime}} she relays
\href{https://en.wikipedia.org/wiki/John_Aubrey}{John Aubrey's} account
of the philosopher John Hobbes's\footnote{Hobbes is famous for the
  \href{https://www.britannica.com/topic/Leviathan-by-Hobbes}{\emph{Leviathan}}
  and the dead-on observation that life is ``nasty, brutish and short''.}
first exposure to Euclid's \emph{Elements}.

\begin{quote}
Being in a gentleman's library Euclid's \emph{Elements} lay open, and
'twas the forty-seventh proposition in the first book. He read the
proposition. ``By God,'' said he, ``this is impossible!'' So he reads
the demonstration of it, which referred him back to such a proof; which
referred him back to another, which he also read. . .. At last he was
demonstratively convinced of the truth. This made him in love with
geometry.
\end{quote}

She goes on to say that in the 17\textsuperscript{th} century knowledge
of Euclid's \emph{Elements} was considered part of a well-rounded
education and that gentlemen were expected to know Euclid's
47\textsuperscript{th} proposition. Well, there aren't a lot of
``gentlemen'' around in the 21\textsuperscript{st} century. We have lots
of obese Chads and
\href{https://www.youtube.com/watch?v=yOCJkSlnjG0}{decorated
truck-driving} bands of
\href{https://www.urbandictionary.com/define.php?term=Trumptard\%27s}{\emph{trumptards}},
but no gentlemen. But, even in our advanced state of social and
intellectual decay, most of us have heard of Euclid's
47\textsuperscript{th} proposition. We call it the
\href{https://analyzethedatanotthedrivel.org/2022/09/28/on-eponymous-erasure/}{\emph{Pythagorean
Theorem}}.

Lately, as part of a larger delusional project, I have been studying the
first six books of The \emph{Elements}. I haven't turned into a geometry
fanboy like Hobbes, but I must confess that reading great classics like
Euclid's \emph{Elements} is surprisingly delightful. One delight is the
canonical numbering of propositions.\footnote{Hobbes'
  17\textsuperscript{th}-century Proposition 47 is still called
  Proposition 47 in Oliver Byrne's 19\textsuperscript{th}-century book.
  It remains Proposition 47 in Thomas Heath's early
  20\textsuperscript{th}-century \emph{magnum opus} and is again called
  Proposition 47 in David Joyce's 21\textsuperscript{st}-century online
  \emph{Elements}. The \emph{Elements'} proposition, or theorem
  numbering, scheme has been stable for centuries.} It helps when
comparing different versions of The \emph{Elements}; I've been reading
three.

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \href{https://www.greenlion.com/books/EuclidsElements.html}{The Green
  Lion \emph{Elements}}.
\item
  \href{https://www.c82.net/euclid/}{Oliver Byrne's 1847 illustrated
  \emph{Elements}}\emph{.}
\item
  \href{https://mathcs.clarku.edu/~djoyce/elements/aboutText.html}{David
  Joyce's excellent online version}.
\end{enumerate}

My main text is the Green Lion \emph{Elements}. The Green Lion version
is based on
\href{https://www.perseus.tufts.edu/hopper/text?doc=Euc.+1}{Thomas
Heath's} monumental and definitive three-volume English translation. It
dispenses with Heath's copious footnotes and commentary and coalesces
all thirteen original \emph{Elements} books into a single attractive
volume. The Green Lion \emph{Elements} is indeed a superb book that
should be in every gentleman's library.

After reading the Green Lion version of a proposition, I pop over to
Byrne's illustrated version and read his presentation of the same
canonically numbered proposition. Byrne sought to make The
\emph{Elements} more accessible by replacing tedious proofs with
striking, beautiful colored illustrations. He wrote:

\begin{quote}
This work has a greater aim than mere illustration; we do not introduce
colours for the purpose of entertainment, or to amuse by certain
combinations of tint and form, but to assist the mind in its researches
after truth.
\end{quote}

You got to love 19\textsuperscript{th}-century authors; the poor dears
believed there was such a thing as ``truth'' and that the mind is better
filled with it than the relative rubbish we call ``our truth'' nowadays.

When first published, Byrne's book was hailed as a graphic masterpiece,
\href{https://www.maa.org/press/periodicals/convergence/oliver-byrne-the-matisse-of-mathematics-byrnes-euclid-geometry-understood-via-color-coded-diagrams}{a
verdict that persists to this day}, but unfortunately, the high-quality
printing required to render hundreds of colored images made his book too
expensive for its intended audience. Consequently, Byrne's book didn't
impact mathematics education much, but it deeply influenced generations
of artists and graphic designers and is still widely revered today.
Byrne's book only covers the first six books of The \emph{Elements}.
This is the main reason I am confining my study to the first six books.
Modern admirers of Byrne have completed his work. You can now read
\href{https://www.kroneckerwallis.com/product/euclids-elements-completing-oliver-byrnes-work/}{all
thirteen books in Byrne's style}.

I can personally attest to the effectiveness of Byrne's style. For me,
Byrne's illustrated proofs are easier to understand than the standard
verbose versions. Byrne's 19\textsuperscript{th}-century illustrations
work for the same reasons the graphic proofs shown on the magnificent
YouTube channel
\href{https://www.youtube.com/c/MicroVisualProofs}{Mathematical Visual
Proofs} work.
\href{https://www.britannica.com/biography/Horace-Roman-poet}{Horace}
said it best:

\begin{quote}
A feebler impress through the ear is made,\newline
Than what is by the faithful eye conveyed.
\end{quote}

To keep focused on my larger project I've been slowly building up a
\href{https://en.wikipedia.org/wiki/Directed_graph}{directed graph}
(digraph) of the proof ``justifications'' found in Euclid's first six
books. ``Justifications'' are the references John Aubrey called out in
his story about Hobbes in the gentleman's library. Typically, proofs
refer to prior proofs, which again refer to earlier proofs, and so on
right back to what Euclid called postulates, common notions, and
definitions. It is this organized comprehensive logical structure that
makes The \emph{Elements} so important. Most of Euclid's results were
known long before him, and ``solitary proofs'' in many forms, are found
in many cultures, sometimes thousands of years before Euclid, but as far
as we know, the idea of organizing everything known about a subject,
geometry in Euclid's case, into a coherent deductive logical structure
was a unique innovation. It's not exaggerating to say this logical
organizing idea changed mathematics and the world forever. We're still
living in Euclid's vision and we're not even sure there is a rational
alternative.

After digraph'ing the first two books of The \emph{Elements}, I decided
I needed to compare my handcrafted squiggles to someone else's. This is
what led me to
\href{https://mathcs.clarku.edu/~djoyce/elements/aboutText.html}{David
Joyce's online \emph{Elements}}. If you browse any of Joyce's pages, say
\href{https://mathcs.clarku.edu/~djoyce/elements/bookI/propI47.html}{Proposition
47}, you will notice the explicit marginal justifications that set
Hobbes on his way. Unlike Hobbes, we can peek under the hood. If you
look at the HTML page code, you'll see the justifications are marked in
\textless div\textgreater{} elements. With such clearly marked
references, it's a simple matter to extract Joyce's
\textless div\textgreater's and generate a
\href{https://graphviz.org/}{graphviz} digraph of Euclid's first six
books. Mining web pages is a dark art practiced by geeky nerds wielding
magic software tools like the wonderfully named
\href{https://beautiful-soup-4.readthedocs.io/en/latest/}{Beautiful
Soup}. I've used Beautiful Soup but sometimes, just sometimes, it's
easier to write a few lines of code than wrestle with frameworks like
Beautiful Soup. The following
\href{https://code.jsoftware.com/wiki/Main_Page}{J verb} sucks out
Joyce's web page justifications.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{eucjoycejust}\KeywordTok{=:}\DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*eucjoycejust v{-}{-} extract justifications from Joyce proposition html.}
\CommentTok{NB.}
\CommentTok{NB. monad:  blcl =. eucjoycejust clHtml}
\CommentTok{NB.}
\CommentTok{NB.   hdr=. \textquotesingle{}https://mathcs.clarku.edu/\textasciitilde{}djoyce/elements/\textquotesingle{} }
\CommentTok{NB.   htm0=. gethttp hdr,\textquotesingle{}bookI/propI47.html\textquotesingle{}}
\CommentTok{NB.   eucjoycejust htm0}

\CommentTok{NB. justifications in html}
\NormalTok{cc}\KeywordTok{=.}\NormalTok{ CR}\KeywordTok{,}\NormalTok{LF}\KeywordTok{,}\NormalTok{TAB}
\RegionMarkerTok{(}\KeywordTok{,}\StringTok{\textquotesingle{}a\textquotesingle{}}\KeywordTok{\&}\NormalTok{geteleattrtext}\KeywordTok{"}\DecValTok{1} \RegionMarkerTok{(}\KeywordTok{]} \StringTok{\textquotesingle{}\textless{}/div\textgreater{}\textquotesingle{}}\KeywordTok{\&}\NormalTok{beforestr}\KeywordTok{;.}\DecValTok{1}\KeywordTok{\textasciitilde{}} \StringTok{\textquotesingle{}\textless{}div class="just"\textgreater{}\textquotesingle{}} \KeywordTok{E.} \KeywordTok{]}\RegionMarkerTok{)} \KeywordTok{y} \KeywordTok{{-}.}\NormalTok{ cc}\RegionMarkerTok{)} \KeywordTok{{-}.} \KeywordTok{a:}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

By blowing over all the web pages with verbs like:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{eucjoycebkdeps}\KeywordTok{=:}\DecValTok{3} \RegionMarkerTok{: 0}

\CommentTok{NB.*eucjoycebkdeps v{-}{-} justifications from Joyce book html files.}
\CommentTok{NB.}
\CommentTok{NB. }\AlertTok{NOTE}\CommentTok{: use (wget) or (curl) to download the files at:}
\CommentTok{NB.}
\CommentTok{NB. https://mathcs.clarku.edu/\textasciitilde{}djoyce/elements/}
\CommentTok{NB.}
\CommentTok{NB. monad:  btcl =. eucjoycebkdeps blclHtmlFiles}
\CommentTok{NB.}
\CommentTok{NB.   NB. justifications in first three books}
\CommentTok{NB.   bks=. \textquotesingle{}bookI/propI*html\textquotesingle{};\textquotesingle{}bookII/propII*.html\textquotesingle{};\textquotesingle{}bookIII/propIII*.html\textquotesingle{}}
\CommentTok{NB.   eucjoycebkdeps ; 1\&dir\&.\textgreater{} (\textless{}\textquotesingle{}\textasciitilde{}temp/\textquotesingle{}) ,\&.\textgreater{} bks}

\KeywordTok{;}\RegionMarkerTok{(}\KeywordTok{\textless{}@}\NormalTok{justfile}\KeywordTok{@}\NormalTok{winpathsep }\KeywordTok{,.}\NormalTok{ eucjoycejust}\KeywordTok{@}\NormalTok{read}\RegionMarkerTok{)}\KeywordTok{\&.\textgreater{}} \KeywordTok{y}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

You can build
\href{https://github.com/bakerjd99/jacks/blob/master/eucgvuts/euclid_digraph_books_1_6.gv}{graphviz
code like this file on GitHub} that collects the justifications in the
first six books of The \emph{Elements}. By loading this graphviz code
into \href{https://wiki.jsoftware.com/wiki/Addons/graphics/graphviz}{J's
graphviz addon} you can generate SVG digraphs like
\href{https://github.com/bakerjd99/jacks/blob/master/eucgvuts/euclid_digraph_books_1_6.svg}{euclid\_digraph\_books\_1\_6.svg}.
SVGs can be easily converted to PDFs. Here is a PDF of
\href{https://bakerjd99.files.wordpress.com/2023/06/euclid_digraph_books_1_6.pdf}{all
the postulates, common notions, definitions, and propositions found in
the first six books of The \emph{Elements}}. The nodes are color-coded
to distinguish postulates from propositions, definitions, and common
notions easily. Large digraphs quickly lose their informative nature.
\href{https://bakerjd99.files.wordpress.com/2023/06/euclid_digraph_books_1_6.pdf}{euclid\_digraph\_books\_1\_6.pdf}
looks more like the work of
\href{https://www.theguardian.com/science/2014/oct/04/spiders-lsd-drugs-experiment-1971}{spiders
on acid} than anything else. Still, the web links embedded in the
document are handy. Clicking on any graph node will take you directly to
the relevant page on Joyce's \emph{Elements} site.

The following J verb follows digraph connections back to their source.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{eucpropback}\KeywordTok{=:}\DecValTok{4} \RegionMarkerTok{: 0}

\CommentTok{NB.*eucpropback v{-}{-} generate reverse proposition digraph.}
\CommentTok{NB.}
\CommentTok{NB. dyad:  cl =. clNode eucpropback clGv}
\CommentTok{NB.}
\CommentTok{NB.   path=. jpath \textquotesingle{}\textasciitilde{}JACKS/eucgvuts/\textquotesingle{}}
\CommentTok{NB.   gv=. read path,\textquotesingle{}euclid\_digraph\_books\_1\_6\_dependencies.gv\textquotesingle{}}
\CommentTok{NB.}
\CommentTok{NB.   NB. typical use}
\CommentTok{NB.   gt=. \textquotesingle{}I.47\textquotesingle{} eucpropback gv}
\CommentTok{NB.   gf=. jpath \textquotesingle{}\textasciitilde{}temp/euclid\_i\_47\_dependencies.gv\textquotesingle{}}
\CommentTok{NB.   (toHOST gt) write gf}
\CommentTok{NB.   graphview gf}

\NormalTok{gs}\KeywordTok{=.} \KeywordTok{s:}\NormalTok{ gc }\KeywordTok{[} \StringTok{\textquotesingle{}gpr gpo gc\textquotesingle{}}\KeywordTok{=.}\NormalTok{ eucnctsparse }\KeywordTok{y}
\StringTok{\textquotesingle{}no such node\textquotesingle{}}\NormalTok{ assert }\RegionMarkerTok{(}\NormalTok{rn}\KeywordTok{=.} \KeywordTok{s:} \KeywordTok{\textless{}x}\RegionMarkerTok{)} \KeywordTok{e.} \DecValTok{1} \KeywordTok{\{"}\DecValTok{1}\NormalTok{ gs}

\CommentTok{NB. work backwards in dependencies}
\NormalTok{dn}\KeywordTok{=.} \DecValTok{0} \DecValTok{2} \KeywordTok{$} \KeywordTok{s:\textless{}}\StringTok{\textquotesingle{}\textquotesingle{}}
\KeywordTok{whilst.} \KeywordTok{\#}\NormalTok{rn }\KeywordTok{do.}
\NormalTok{  sn}\KeywordTok{=.}\NormalTok{ gs }\KeywordTok{\#\textasciitilde{}} \RegionMarkerTok{(}\DecValTok{1} \KeywordTok{\{"}\DecValTok{1}\NormalTok{ gs}\RegionMarkerTok{)} \KeywordTok{e.}\NormalTok{ rn}
\NormalTok{  dn}\KeywordTok{=.}\NormalTok{ dn }\KeywordTok{,} \KeywordTok{|."}\DecValTok{1}\NormalTok{ sn}
\NormalTok{  rn}\KeywordTok{=.} \RegionMarkerTok{(}\DecValTok{0} \KeywordTok{\{"}\DecValTok{1}\NormalTok{ sn}\RegionMarkerTok{)} \KeywordTok{{-}.} \DecValTok{0} \KeywordTok{\{"}\DecValTok{1}\NormalTok{ dn}
\KeywordTok{end.}

\NormalTok{title}\KeywordTok{=.} \StringTok{\textquotesingle{}Proposition \textquotesingle{}}\KeywordTok{,x,}\StringTok{\textquotesingle{} Dependencies\textquotesingle{}}
\NormalTok{title fmteucgv gpr}\KeywordTok{;}\NormalTok{gpo}\KeywordTok{;\textless{}}\DecValTok{5} \KeywordTok{s:} \KeywordTok{|."}\DecValTok{1}\NormalTok{ dn}
\RegionMarkerTok{)}
\end{Highlighting}
\end{Shaded}

Running this verb on Proposition 47 generates this
\href{https://bakerjd99.files.wordpress.com/2023/06/euclid_i_47_dependencies.pdf}{reverse
sub-digraph} that retraces the steps Hobbes took back in his
17\textsuperscript{th}-century gentleman's library.

\captionsetup[figure]{labelformat=empty}
\begin{figure}[htbp]
\centering
\href{https://bakerjd99.files.wordpress.com/2023/06/euclid_i_47_dependencies.png}{\includegraphics[width=0.75\textwidth]{euclid_i_47_dependencies.png}}
\caption[Proposition 47 dependencies]{}
\label{fig:7864x0}
\end{figure}

The code referenced in this post is available on GitHub at:
\url{https://github.com/bakerjd99/jacks/tree/master/eucgvuts}

%\end{document}
